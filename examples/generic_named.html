{% extends "./example-base.html" %}
{% comment "What" %}
    The "Generic named" template extends the example base and infers the name of
    the imports _include_ and the theatre script name.

    Apply to the template file:

        {% extends "./generic_named.html" %}

    If the target example file is "foo-example.html", the expected imports become:

        imports/foo-example.html
        theatre/foo-example.js
{% endcomment %}
{% load strings  %}
{% load try_include %}

{% if metadata %}
    {% block title %}{{ metadata.title }}{% endblock title %}
{% endif %}

{% block js %}
    {% str_merge "./imports/" part_name ".html" as include_name %}
    {% if include_name|template_exists %}
        {% include include_name %}
    {% else %}
        <div class="no-imports">
            <p>Default imports file "{{ part_name }}" do not exist.</p>
        </div>
    {% endif %}

    {% for import_template_name in metadata.imports %}
        {% str_merge "./imports/" import_template_name as include_name %}
        <!-- Including import "{{include_name}}" -->
        {% if include_name|template_exists %}
            <!-- exists "{{include_name}}" -->
            {% include include_name %}
        {% else %}
            <!-- fail "{{include_name}}" -->
            <div class="no-imports">
                <p>Defined imports "{{ import_template_name }}" do not exist.</p>
            </div>
        {% endif %}
    {% endfor %}

    {% if markdown %}
        <div class="markdown-content border-solid-1px-#333 margin-1em font-lexand-deca">
            {{ markdown.html|safe }}
        </div>
    {% endif %}

    {% if metadata %}
        {% include 'docs/metadata-table.html' %}
    {% endif %}
{% endblock js %}


{% block extra_js %}
    {% str_merge "../theatre/" part_name ".js" as script_name %}
    <script src={{script_name}}></script>
{% endblock extra_js %}
