{
    "defs": [
        {
            "kind": "function",
            "word": "reflectPoint",
            "generator": false,
            "expression": false,
            "async": false,
            "params": [
                {
                    "name": "origin"
                },
                {
                    "name": "line"
                }
            ],
            "id": {
                "type": "Identifier",
                "start": 136,
                "end": 148,
                "loc": {
                    "start": {
                        "line": 12,
                        "column": 9
                    },
                    "end": {
                        "line": 12,
                        "column": 21
                    }
                },
                "name": "reflectPoint",
                "pos": {
                    "start": 136,
                    "end": 148,
                    "loc": {
                        "start": {
                            "line": 12,
                            "column": 9
                        },
                        "end": {
                            "line": 12,
                            "column": 21
                        }
                    }
                }
            },
            "pos": {
                "start": 127,
                "end": 1542,
                "loc": {
                    "start": {
                        "line": 12,
                        "column": 0
                    },
                    "end": {
                        "line": 56,
                        "column": 1
                    }
                }
            },
            "type": "FunctionDeclaration"
        },
        {
            "kind": "function",
            "word": "intersectionPoint",
            "generator": false,
            "expression": false,
            "async": false,
            "params": [
                {
                    "name": "origin"
                },
                {
                    "name": "line"
                }
            ],
            "id": {
                "type": "Identifier",
                "start": 1557,
                "end": 1574,
                "loc": {
                    "start": {
                        "line": 59,
                        "column": 9
                    },
                    "end": {
                        "line": 59,
                        "column": 26
                    }
                },
                "name": "intersectionPoint",
                "pos": {
                    "start": 1557,
                    "end": 1574,
                    "loc": {
                        "start": {
                            "line": 59,
                            "column": 9
                        },
                        "end": {
                            "line": 59,
                            "column": 26
                        }
                    }
                }
            },
            "pos": {
                "start": 1548,
                "end": 2773,
                "loc": {
                    "start": {
                        "line": 59,
                        "column": 0
                    },
                    "end": {
                        "line": 94,
                        "column": 1
                    }
                }
            },
            "type": "FunctionDeclaration"
        },
        {
            "kind": "function",
            "word": "reflectPointOnSameSide",
            "generator": false,
            "expression": false,
            "async": false,
            "params": [
                {
                    "name": "origin"
                },
                {
                    "name": "line"
                }
            ],
            "id": {
                "type": "Identifier",
                "start": 2788,
                "end": 2810,
                "loc": {
                    "start": {
                        "line": 97,
                        "column": 9
                    },
                    "end": {
                        "line": 97,
                        "column": 31
                    }
                },
                "name": "reflectPointOnSameSide",
                "pos": {
                    "start": 2788,
                    "end": 2810,
                    "loc": {
                        "start": {
                            "line": 97,
                            "column": 9
                        },
                        "end": {
                            "line": 97,
                            "column": 31
                        }
                    }
                }
            },
            "pos": {
                "start": 2779,
                "end": 4459,
                "loc": {
                    "start": {
                        "line": 97,
                        "column": 0
                    },
                    "end": {
                        "line": 142,
                        "column": 1
                    }
                }
            },
            "type": "FunctionDeclaration"
        },
        {
            "kind": "class",
            "word": "Mirror",
            "parentName": null,
            "type": "ClassDeclaration",
            "body": [
                {
                    "kind": "property",
                    "word": "renderLine",
                    "computed": false,
                    "static": false,
                    "value": {
                        "kind": "literal",
                        "raw": "true",
                        "value": true,
                        "pos": {
                            "start": 4660,
                            "end": 4664,
                            "loc": {
                                "start": {
                                    "line": 152,
                                    "column": 16
                                },
                                "end": {
                                    "line": 152,
                                    "column": 20
                                }
                            }
                        }
                    },
                    "type": "PropertyDefinition",
                    "pos": {
                        "start": 4647,
                        "end": 4664,
                        "loc": {
                            "start": {
                                "line": 152,
                                "column": 3
                            },
                            "end": {
                                "line": 152,
                                "column": 20
                            }
                        }
                    }
                },
                {
                    "kind": "property",
                    "word": "renderPoints",
                    "computed": false,
                    "static": false,
                    "value": {
                        "kind": "literal",
                        "raw": "true",
                        "value": true,
                        "pos": {
                            "start": 4684,
                            "end": 4688,
                            "loc": {
                                "start": {
                                    "line": 153,
                                    "column": 18
                                },
                                "end": {
                                    "line": 153,
                                    "column": 22
                                }
                            }
                        }
                    },
                    "type": "PropertyDefinition",
                    "pos": {
                        "start": 4669,
                        "end": 4688,
                        "loc": {
                            "start": {
                                "line": 153,
                                "column": 3
                            },
                            "end": {
                                "line": 153,
                                "column": 22
                            }
                        }
                    }
                },
                {
                    "kind": "property",
                    "word": "renderReflections",
                    "computed": false,
                    "static": false,
                    "value": {
                        "kind": "literal",
                        "raw": "true",
                        "value": true,
                        "pos": {
                            "start": 4713,
                            "end": 4717,
                            "loc": {
                                "start": {
                                    "line": 154,
                                    "column": 23
                                },
                                "end": {
                                    "line": 154,
                                    "column": 27
                                }
                            }
                        }
                    },
                    "type": "PropertyDefinition",
                    "pos": {
                        "start": 4693,
                        "end": 4717,
                        "loc": {
                            "start": {
                                "line": 154,
                                "column": 3
                            },
                            "end": {
                                "line": 154,
                                "column": 27
                            }
                        }
                    }
                },
                {
                    "kind": "constructor",
                    "word": "constructor",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "points",
                                "default_value": "undefined"
                            }
                        ],
                        "pos": {
                            "start": 4735,
                            "end": 4913,
                            "loc": {
                                "start": {
                                    "line": 156,
                                    "column": 14
                                },
                                "end": {
                                    "line": 160,
                                    "column": 4
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 4724,
                        "end": 4913,
                        "loc": {
                            "start": {
                                "line": 156,
                                "column": 3
                            },
                            "end": {
                                "line": 160,
                                "column": 4
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "step",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 4924,
                            "end": 5571,
                            "loc": {
                                "start": {
                                    "line": 162,
                                    "column": 7
                                },
                                "end": {
                                    "line": 177,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " iterate all the reflectPoints, and update the mirror point positions.\r\n        We avoid rewriting the points, so they're more persistent. ",
                                "block": true,
                                "line": 164
                            }
                        ]
                    },
                    "pos": {
                        "start": 4920,
                        "end": 5571,
                        "loc": {
                            "start": {
                                "line": 162,
                                "column": 3
                            },
                            "end": {
                                "line": 177,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "reflect",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "point"
                            },
                            {
                                "name": "line"
                            }
                        ],
                        "pos": {
                            "start": 5586,
                            "end": 5775,
                            "loc": {
                                "start": {
                                    "line": 179,
                                    "column": 11
                                },
                                "end": {
                                    "line": 185,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 5579,
                        "end": 5775,
                        "loc": {
                            "start": {
                                "line": 179,
                                "column": 4
                            },
                            "end": {
                                "line": 185,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "reflectSiblings",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "point"
                            },
                            {
                                "name": "line"
                            }
                        ],
                        "pos": {
                            "start": 5798,
                            "end": 6098,
                            "loc": {
                                "start": {
                                    "line": 187,
                                    "column": 19
                                },
                                "end": {
                                    "line": 196,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 5783,
                        "end": 6098,
                        "loc": {
                            "start": {
                                "line": 187,
                                "column": 4
                            },
                            "end": {
                                "line": 196,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "reflectSegment",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "point"
                            },
                            {
                                "name": "line"
                            }
                        ],
                        "pos": {
                            "start": 6120,
                            "end": 6207,
                            "loc": {
                                "start": {
                                    "line": 198,
                                    "column": 18
                                },
                                "end": {
                                    "line": 200,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 6106,
                        "end": 6207,
                        "loc": {
                            "start": {
                                "line": 198,
                                "column": 4
                            },
                            "end": {
                                "line": 200,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "clean",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 6220,
                            "end": 6731,
                            "loc": {
                                "start": {
                                    "line": 202,
                                    "column": 9
                                },
                                "end": {
                                    "line": 220,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Remove any old references from the mirror map;\r\n        1: Any undefined positions\r\n        2: any point greater than the reflectpointsIndex\r\n        ",
                                "block": true,
                                "line": 206
                            }
                        ]
                    },
                    "pos": {
                        "start": 6215,
                        "end": 6731,
                        "loc": {
                            "start": {
                                "line": 202,
                                "column": 4
                            },
                            "end": {
                                "line": 220,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "getMirrorIndex",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "index"
                            }
                        ],
                        "pos": {
                            "start": 6753,
                            "end": 7008,
                            "loc": {
                                "start": {
                                    "line": 222,
                                    "column": 18
                                },
                                "end": {
                                    "line": 230,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 6739,
                        "end": 7008,
                        "loc": {
                            "start": {
                                "line": 222,
                                "column": 4
                            },
                            "end": {
                                "line": 230,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "draw",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            }
                        ],
                        "pos": {
                            "start": 7020,
                            "end": 7193,
                            "loc": {
                                "start": {
                                    "line": 232,
                                    "column": 8
                                },
                                "end": {
                                    "line": 236,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 7016,
                        "end": 7193,
                        "loc": {
                            "start": {
                                "line": 232,
                                "column": 4
                            },
                            "end": {
                                "line": 236,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "drawLine",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            }
                        ],
                        "pos": {
                            "start": 7209,
                            "end": 7260,
                            "loc": {
                                "start": {
                                    "line": 238,
                                    "column": 12
                                },
                                "end": {
                                    "line": 240,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 7201,
                        "end": 7260,
                        "loc": {
                            "start": {
                                "line": 238,
                                "column": 4
                            },
                            "end": {
                                "line": 240,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "drawPoints",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            }
                        ],
                        "pos": {
                            "start": 7278,
                            "end": 7496,
                            "loc": {
                                "start": {
                                    "line": 242,
                                    "column": 14
                                },
                                "end": {
                                    "line": 249,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " this.stroke.wrap(()=>this.points.pen.stroke(ctx))",
                                "block": false,
                                "line": 247
                            }
                        ]
                    },
                    "pos": {
                        "start": 7268,
                        "end": 7496,
                        "loc": {
                            "start": {
                                "line": 242,
                                "column": 4
                            },
                            "end": {
                                "line": 249,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "pointStroke",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 7515,
                            "end": 7800,
                            "loc": {
                                "start": {
                                    "line": 251,
                                    "column": 15
                                },
                                "end": {
                                    "line": 263,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 7504,
                        "end": 7800,
                        "loc": {
                            "start": {
                                "line": 251,
                                "column": 4
                            },
                            "end": {
                                "line": 263,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "drawPointsNew",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            }
                        ],
                        "pos": {
                            "start": 7821,
                            "end": 7970,
                            "loc": {
                                "start": {
                                    "line": 265,
                                    "column": 17
                                },
                                "end": {
                                    "line": 272,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 7808,
                        "end": 7970,
                        "loc": {
                            "start": {
                                "line": 265,
                                "column": 4
                            },
                            "end": {
                                "line": 272,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "drawReflections",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            }
                        ],
                        "pos": {
                            "start": 7993,
                            "end": 8098,
                            "loc": {
                                "start": {
                                    "line": 274,
                                    "column": 19
                                },
                                "end": {
                                    "line": 278,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 7978,
                        "end": 8098,
                        "loc": {
                            "start": {
                                "line": 274,
                                "column": 4
                            },
                            "end": {
                                "line": 278,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "add",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 8109,
                            "end": 8315,
                            "loc": {
                                "start": {
                                    "line": 280,
                                    "column": 7
                                },
                                "end": {
                                    "line": 286,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Synonmous to 'push', but this isn't an Array - so we avoid it\r\n\r\n            Mirror.add(point, point)\r\n        ",
                                "block": true,
                                "line": 284
                            }
                        ]
                    },
                    "pos": {
                        "start": 8106,
                        "end": 8315,
                        "loc": {
                            "start": {
                                "line": 280,
                                "column": 4
                            },
                            "end": {
                                "line": 286,
                                "column": 5
                            }
                        }
                    }
                }
            ],
            "comments": {
                "header": [],
                "inner": [
                    {
                        "text": " Accept two points as the primary line,\r\n    _add_ many points to 'reflect'\r\n    _collect_ the reflected points\r\n    _ and a free draw function _\r\n    ",
                        "block": true,
                        "line": 150
                    }
                ]
            },
            "pos": {
                "start": 4465,
                "end": 8318,
                "loc": {
                    "start": {
                        "line": 145,
                        "column": 0
                    },
                    "end": {
                        "line": 287,
                        "column": 1
                    }
                }
            }
        },
        {
            "type": "ExpressionStatement",
            "expression": {
                "type": "CallExpression",
                "start": 8326,
                "end": 8356,
                "loc": {
                    "start": {
                        "line": 291,
                        "column": 0
                    },
                    "end": {
                        "line": 291,
                        "column": 30
                    }
                },
                "callee": {
                    "type": "MemberExpression",
                    "start": 8326,
                    "end": 8348,
                    "loc": {
                        "start": {
                            "line": 291,
                            "column": 0
                        },
                        "end": {
                            "line": 291,
                            "column": 22
                        }
                    },
                    "object": {
                        "type": "MemberExpression",
                        "start": 8326,
                        "end": 8340,
                        "loc": {
                            "start": {
                                "line": 291,
                                "column": 0
                            },
                            "end": {
                                "line": 291,
                                "column": 14
                            }
                        },
                        "object": {
                            "type": "Identifier",
                            "start": 8326,
                            "end": 8335,
                            "loc": {
                                "start": {
                                    "line": 291,
                                    "column": 0
                                },
                                "end": {
                                    "line": 291,
                                    "column": 9
                                }
                            },
                            "name": "Polypoint",
                            "pos": {
                                "start": 8326,
                                "end": 8335,
                                "loc": {
                                    "start": {
                                        "line": 291,
                                        "column": 0
                                    },
                                    "end": {
                                        "line": 291,
                                        "column": 9
                                    }
                                }
                            }
                        },
                        "property": {
                            "type": "Identifier",
                            "start": 8336,
                            "end": 8340,
                            "loc": {
                                "start": {
                                    "line": 291,
                                    "column": 10
                                },
                                "end": {
                                    "line": 291,
                                    "column": 14
                                }
                            },
                            "name": "head",
                            "pos": {
                                "start": 8336,
                                "end": 8340,
                                "loc": {
                                    "start": {
                                        "line": 291,
                                        "column": 10
                                    },
                                    "end": {
                                        "line": 291,
                                        "column": 14
                                    }
                                }
                            }
                        },
                        "computed": false,
                        "optional": false,
                        "pos": {
                            "start": 8326,
                            "end": 8340,
                            "loc": {
                                "start": {
                                    "line": 291,
                                    "column": 0
                                },
                                "end": {
                                    "line": 291,
                                    "column": 14
                                }
                            }
                        }
                    },
                    "property": {
                        "type": "Identifier",
                        "start": 8341,
                        "end": 8348,
                        "loc": {
                            "start": {
                                "line": 291,
                                "column": 15
                            },
                            "end": {
                                "line": 291,
                                "column": 22
                            }
                        },
                        "name": "install",
                        "pos": {
                            "start": 8341,
                            "end": 8348,
                            "loc": {
                                "start": {
                                    "line": 291,
                                    "column": 15
                                },
                                "end": {
                                    "line": 291,
                                    "column": 22
                                }
                            }
                        }
                    },
                    "computed": false,
                    "optional": false,
                    "pos": {
                        "start": 8326,
                        "end": 8348,
                        "loc": {
                            "start": {
                                "line": 291,
                                "column": 0
                            },
                            "end": {
                                "line": 291,
                                "column": 22
                            }
                        }
                    }
                },
                "arguments": [
                    {
                        "type": "Identifier",
                        "start": 8349,
                        "end": 8355,
                        "loc": {
                            "start": {
                                "line": 291,
                                "column": 23
                            },
                            "end": {
                                "line": 291,
                                "column": 29
                            }
                        },
                        "name": "Mirror",
                        "pos": {
                            "start": 8349,
                            "end": 8355,
                            "loc": {
                                "start": {
                                    "line": 291,
                                    "column": 23
                                },
                                "end": {
                                    "line": 291,
                                    "column": 29
                                }
                            }
                        }
                    }
                ],
                "optional": false,
                "pos": {
                    "start": 8326,
                    "end": 8356,
                    "loc": {
                        "start": {
                            "line": 291,
                            "column": 0
                        },
                        "end": {
                            "line": 291,
                            "column": 30
                        }
                    }
                }
            },
            "pos": {
                "start": 8326,
                "end": 8356,
                "loc": {
                    "start": {
                        "line": 291,
                        "column": 0
                    },
                    "end": {
                        "line": 291,
                        "column": 30
                    }
                }
            }
        }
    ],
    "types": [
        "FunctionDeclaration",
        "FunctionDeclaration",
        "FunctionDeclaration",
        "ClassDeclaration",
        "ExpressionStatement"
    ],
    "info": {
        "filename": "mirror.js",
        "path": "/workspaces/polypoint/point_src/mirror.js",
        "size": 8356,
        "parsed_date": "2025-11-02T21:11:37.266Z"
    }
}