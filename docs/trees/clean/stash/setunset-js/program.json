{
    "defs": [
        {
            "kind": "class",
            "word": "SetUnset",
            "parentName": null,
            "type": "ClassDeclaration",
            "body": [
                {
                    "kind": "constructor",
                    "word": "constructor",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "settings",
                                "default_value": "{}"
                            }
                        ],
                        "pos": {
                            "start": 1265,
                            "end": 1501,
                            "loc": {
                                "start": {
                                    "line": 45,
                                    "column": 15
                                },
                                "end": {
                                    "line": 52,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [
                            {
                                "text": " Perform _stroke_ with styling and stoking; but with a convenient\r\n    on/off without using the context switcher. ",
                                "block": true,
                                "line": 44
                            }
                        ],
                        "inner": []
                    },
                    "pos": {
                        "start": 1254,
                        "end": 1501,
                        "loc": {
                            "start": {
                                "line": 45,
                                "column": 4
                            },
                            "end": {
                                "line": 52,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "onCreate",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "cachedData"
                            }
                        ],
                        "pos": {
                            "start": 1517,
                            "end": 1540,
                            "loc": {
                                "start": {
                                    "line": 54,
                                    "column": 12
                                },
                                "end": {
                                    "line": 56,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 1509,
                        "end": 1540,
                        "loc": {
                            "start": {
                                "line": 54,
                                "column": 4
                            },
                            "end": {
                                "line": 56,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "update",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "settings"
                            }
                        ],
                        "pos": {
                            "start": 1554,
                            "end": 1767,
                            "loc": {
                                "start": {
                                    "line": 58,
                                    "column": 10
                                },
                                "end": {
                                    "line": 63,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Apply changes for the persistent info",
                                "block": true,
                                "line": 59
                            }
                        ]
                    },
                    "pos": {
                        "start": 1548,
                        "end": 1767,
                        "loc": {
                            "start": {
                                "line": 58,
                                "column": 4
                            },
                            "end": {
                                "line": 63,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "getOpts",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 1782,
                            "end": 2377,
                            "loc": {
                                "start": {
                                    "line": 65,
                                    "column": 11
                                },
                                "end": {
                                    "line": 85,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 1775,
                        "end": 2377,
                        "loc": {
                            "start": {
                                "line": 65,
                                "column": 4
                            },
                            "end": {
                                "line": 85,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "prepare",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "settings"
                            }
                        ],
                        "pos": {
                            "start": 2392,
                            "end": 5117,
                            "loc": {
                                "start": {
                                    "line": 87,
                                    "column": 11
                                },
                                "end": {
                                    "line": 166,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": "\r\n            when _settings_ to the ctx\r\n            + first check if its a raw prop,\r\n            + else then resolve from the map.\r\n            + keep the last value\r\n            + Apply through the given function\r\n            + accept a optional return function, to call during unset.\r\n\r\n            Therefore the stroker has a _state_\r\n            This should occur _early_ such that the _set_ here runs a chain of\r\n            on/off functions in a map.\r\n\r\n            Which means:\r\n\r\n            1. for each key resolve ctx (real prop map key), on method, off method\r\n            2. store those until _set_\r\n            3. iter on map; calling each func with the ctx and the value\r\n            4. iter off map, calling each with the stored value, reapplying in the func.\r\n\r\n         ",
                                "block": true,
                                "line": 107
                            }
                        ]
                    },
                    "pos": {
                        "start": 2385,
                        "end": 5117,
                        "loc": {
                            "start": {
                                "line": 87,
                                "column": 4
                            },
                            "end": {
                                "line": 166,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "genericKeyApply",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "key"
                            },
                            {
                                "name": "newValue"
                            }
                        ],
                        "pos": {
                            "start": 5140,
                            "end": 5479,
                            "loc": {
                                "start": {
                                    "line": 168,
                                    "column": 19
                                },
                                "end": {
                                    "line": 176,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Receive a ctx key property (e.g. lineWidth) and apply the newValue\r\n\r\n        Return the previously applied value and a function to remove reverse change.\r\n         ",
                                "block": true,
                                "line": 172
                            }
                        ]
                    },
                    "pos": {
                        "start": 5125,
                        "end": 5479,
                        "loc": {
                            "start": {
                                "line": 168,
                                "column": 4
                            },
                            "end": {
                                "line": 176,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "genericKeyRemove",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "key"
                            },
                            {
                                "name": "newValue"
                            }
                        ],
                        "pos": {
                            "start": 5503,
                            "end": 5798,
                            "loc": {
                                "start": {
                                    "line": 178,
                                    "column": 20
                                },
                                "end": {
                                    "line": 185,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": "\r\n        the newValue given is the original value applied to this key, before\r\n        the change occured (the cached value). Therefore the _remove_ is\r\n        identical to the _apply_.\r\n        ",
                                "block": true,
                                "line": 183
                            }
                        ]
                    },
                    "pos": {
                        "start": 5487,
                        "end": 5798,
                        "loc": {
                            "start": {
                                "line": 178,
                                "column": 4
                            },
                            "end": {
                                "line": 185,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "functionKeyApply",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "assignment"
                            },
                            {
                                "name": "newValue"
                            },
                            {
                                "name": "key"
                            }
                        ],
                        "pos": {
                            "start": 5822,
                            "end": 6288,
                            "loc": {
                                "start": {
                                    "line": 187,
                                    "column": 20
                                },
                                "end": {
                                    "line": 201,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Call upon the `aasignment` function, with the key and value.\r\n        This expects a {f: function,v: value} response ",
                                "block": true,
                                "line": 189
                            }
                        ]
                    },
                    "pos": {
                        "start": 5806,
                        "end": 6288,
                        "loc": {
                            "start": {
                                "line": 187,
                                "column": 4
                            },
                            "end": {
                                "line": 201,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "set",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "settings"
                            }
                        ],
                        "pos": {
                            "start": 6299,
                            "end": 6792,
                            "loc": {
                                "start": {
                                    "line": 203,
                                    "column": 7
                                },
                                "end": {
                                    "line": 221,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Iter all the assignments,\r\n            functionally calling each ",
                                "block": true,
                                "line": 214
                            }
                        ]
                    },
                    "pos": {
                        "start": 6296,
                        "end": 6792,
                        "loc": {
                            "start": {
                                "line": 203,
                                "column": 4
                            },
                            "end": {
                                "line": 221,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "getCacheBeforeApply",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 6819,
                            "end": 6858,
                            "loc": {
                                "start": {
                                    "line": 223,
                                    "column": 23
                                },
                                "end": {
                                    "line": 225,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 6800,
                        "end": 6858,
                        "loc": {
                            "start": {
                                "line": 223,
                                "column": 4
                            },
                            "end": {
                                "line": 225,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "unset",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "settings"
                            }
                        ],
                        "pos": {
                            "start": 6871,
                            "end": 7479,
                            "loc": {
                                "start": {
                                    "line": 227,
                                    "column": 9
                                },
                                "end": {
                                    "line": 247,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": "Remove any currently applied styles, by reading the\r\n        cache and performing the reverse. ",
                                "block": true,
                                "line": 229
                            }
                        ]
                    },
                    "pos": {
                        "start": 6866,
                        "end": 7479,
                        "loc": {
                            "start": {
                                "line": 227,
                                "column": 4
                            },
                            "end": {
                                "line": 247,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "draw",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 7491,
                            "end": 7552,
                            "loc": {
                                "start": {
                                    "line": 249,
                                    "column": 8
                                },
                                "end": {
                                    "line": 251,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " a start but probably more dynamic. ",
                                "block": true,
                                "line": 250
                            }
                        ]
                    },
                    "pos": {
                        "start": 7487,
                        "end": 7552,
                        "loc": {
                            "start": {
                                "line": 249,
                                "column": 4
                            },
                            "end": {
                                "line": 251,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "wrap",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "ctx"
                            },
                            {
                                "name": "settings"
                            },
                            {
                                "name": "func"
                            }
                        ],
                        "pos": {
                            "start": 7564,
                            "end": 7926,
                            "loc": {
                                "start": {
                                    "line": 253,
                                    "column": 8
                                },
                                "end": {
                                    "line": 267,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " Wrap the call with a start stop\r\n\r\n            wrap(ctx, ()=>{})\r\n            wrap(ctx, settings, ()=>{})\r\n        ",
                                "block": true,
                                "line": 258
                            }
                        ]
                    },
                    "pos": {
                        "start": 7560,
                        "end": 7926,
                        "loc": {
                            "start": {
                                "line": 253,
                                "column": 4
                            },
                            "end": {
                                "line": 267,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "step",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [],
                        "pos": {
                            "start": 7938,
                            "end": 8567,
                            "loc": {
                                "start": {
                                    "line": 269,
                                    "column": 8
                                },
                                "end": {
                                    "line": 291,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " A _step_ is required when integrating moving values, such as the\r\n        dash offset animation. ",
                                "block": true,
                                "line": 271
                            }
                        ]
                    },
                    "pos": {
                        "start": 7934,
                        "end": 8567,
                        "loc": {
                            "start": {
                                "line": 269,
                                "column": 4
                            },
                            "end": {
                                "line": 291,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "off",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "setDisable",
                                "default_value": true
                            }
                        ],
                        "pos": {
                            "start": 8578,
                            "end": 8697,
                            "loc": {
                                "start": {
                                    "line": 293,
                                    "column": 7
                                },
                                "end": {
                                    "line": 296,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": [
                            {
                                "text": " undo any _on_ and _pause_ the _on_ function",
                                "block": false,
                                "line": 294
                            }
                        ]
                    },
                    "pos": {
                        "start": 8575,
                        "end": 8697,
                        "loc": {
                            "start": {
                                "line": 293,
                                "column": 4
                            },
                            "end": {
                                "line": 296,
                                "column": 5
                            }
                        }
                    }
                },
                {
                    "kind": "method",
                    "word": "on",
                    "static": false,
                    "computed": false,
                    "is_symbol": false,
                    "value": {
                        "type": "FunctionExpression",
                        "id": null,
                        "generator": false,
                        "expression": false,
                        "async": false,
                        "params": [
                            {
                                "name": "setEnable",
                                "default_value": true
                            }
                        ],
                        "pos": {
                            "start": 8707,
                            "end": 8767,
                            "loc": {
                                "start": {
                                    "line": 298,
                                    "column": 6
                                },
                                "end": {
                                    "line": 300,
                                    "column": 5
                                }
                            }
                        }
                    },
                    "type": "MethodDefinition",
                    "comments": {
                        "header": [],
                        "inner": []
                    },
                    "pos": {
                        "start": 8705,
                        "end": 8767,
                        "loc": {
                            "start": {
                                "line": 298,
                                "column": 4
                            },
                            "end": {
                                "line": 300,
                                "column": 5
                            }
                        }
                    }
                }
            ],
            "comments": {
                "header": [
                    {
                        "text": "\r\n    The \"Set Unset\" tool acts similar to the _ctx.save()_ method, by applying\r\n    changes to the context, and then _unsetting_ after usage.\r\n\r\n    This allows the _switching_ of a property of the context with `set` and `unset`\r\n    values previously assigned to changed properties are reapplied - essentially _wrapping_\r\n    some drawing with context changes.\r\n\r\n        su = new SetUnset({\r\n            lineWidth: 10\r\n        })\r\n\r\n        // lineWidth == ...\r\n        su.set(ctx)\r\n        // lineWidth == 10\r\n        su.unset(ctx)\r\n        // lineWidth == ...\r\n\r\n    Implement shortcuts:\r\n\r\n        class Stroke extends SetUnset {\r\n            getOpts() {\r\n                let supported = new Set([\r\n                    , \"lineWidth\"\r\n                ])\r\n\r\n                let map = {\r\n                    color: 'strokeStyle'\r\n                }\r\n                let functional = {\r\n                    dash: 'lineDashKeyApply'\r\n                }\r\n                return [supported, map, functional]\r\n            }\r\n        }\r\n\r\n        st = new Stroke({\r\n            color: 'red'\r\n        })\r\n ",
                        "block": true,
                        "line": 40
                    }
                ],
                "inner": [
                    {
                        "text": " Perform _stroke_ with styling and stoking; but with a convenient\r\n    on/off without using the context switcher. ",
                        "block": true,
                        "line": 44
                    }
                ]
            },
            "pos": {
                "start": 1106,
                "end": 8772,
                "loc": {
                    "start": {
                        "line": 41,
                        "column": 0
                    },
                    "end": {
                        "line": 302,
                        "column": 1
                    }
                }
            }
        }
    ],
    "types": [
        "ClassDeclaration"
    ],
    "info": {
        "filename": "setunset.js",
        "path": "/workspaces/polypoint/point_src/setunset.js",
        "size": 8774,
        "parsed_date": "2025-11-02T21:11:40.121Z"
    }
}